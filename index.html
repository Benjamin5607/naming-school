<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Naming School</title>
  <link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">
  <style>
    body { font-family: sans-serif; text-align: center; background: #f0f0f0; padding: 20px; }
    h1 { font-family: 'Anton', sans-serif; color: #ff4500; }
    #preview { max-width: 100%; border-radius: 20px; box-shadow: 0 10px 20px rgba(0,0,0,0.3); margin: 20px auto; }
    canvas { max-width: 100%; border-radius: 20px; }
    button { padding: 10px 20px; font-size: 18px; margin: 10px; background: #ff4500; color: white; border: none; border-radius: 10px; }
    input { margin: 20px; }
  </style>
</head>
<body>
  <h1>Naming School 🎓</h1>
  <p>이미지 올려봐! 완전 웃긴 제목 붙여서 스티커 만들어줄게 😆</p>
  
  <input type="file" id="imageLoader" accept="image/*">
  
  <canvas id="canvas" style="display:none;"></canvas>
  <img id="preview" alt="스티커 미리보기">
  
  <br>
  <button id="downloadBtn" style="display:none;">스티커 다운로드 📥</button>


  <script>
    const titles = [
      "우주를 정복하려는 변장한 감자",
      "할머니의 비밀 춤 실력 공개",
      "이 녀석은 사실 외계 김치",
      "세계를 구할 준비된 냉장고",
      "웃음 버튼 누른 고양이 대마왕",
      "미끄러운 바나나의 반란",
      "세상에서 제일 게으른 슈퍼히어로",
      "커피 없인 못 사는 좀비",
      "비밀 요원으로 위장한 토스트",
      "인터넷 속도에 목숨 건 햄스터",
      "춤추는 양배추의 꿈",
      "세탁기 속 블랙홀 발견",
      "치즈를 훔친 쥐의 자서전",
      "비 오는 날 우산 잊어버린 신",
      "핸드폰 배터리 1%의 공포",
      "피자 위에 올라탄 펭귄",
      "책상 아래 숨은 괴물의 일상",
      "넷플릭스 마라톤 세계 챔피언",
      "알람시계와의 영원한 전쟁",
      "김밥 속 숨겨진 보물",
      "고양이가 키보드 점령한 날",
      "라면 끓이다 우주 여행 간 사람",
      "셀카 찍는 유령",
      "운동 시작한지 3일차 포기왕",
      "초콜릿 중독자의 고백",
      "WiFi 신호 약할 때의 절규",
      "꿈에서 본 로또 번호",
      "냉장고 문 열 때마다 놀라는 야채들",
      "베개와의 전쟁에서 패배",
      "월요일 아침의 적",
      "주말 계획 세운 금요일의 나",
      "다이어트 중인 케이크",
      "인생은 한 방울의 소스",
      "고양이 털 범벅 인생",
      "에어컨 없인 못 사는 여름 괴물",
      "잠옷 입고 출근한 날",
      "커피가 곧 피인 사람",
      "책상정리 1분 후의 현실",
      "헤드폰 끼고 세상 차단 모드",
      "배고플 때 세상 정복 가능",
      "넷플릭스 '다음 화 재생' 버튼의 유혹",
      // 더 추가하고 싶으면 여기 넣어!
    ];


    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const preview = document.getElementById('preview');
    const downloadBtn = document.getElementById('downloadBtn');


    document.getElementById('imageLoader').addEventListener('change', function(e) {
      if (e.target.files.length == 0) return;
      
      const file = e.target.files[0];
      const reader = new FileReader();
      
      reader.onload = function(event) {
        const img = new Image();
        img.onload = function() {
          // 캔버스 사이즈 맞추기
          canvas.width = img.width;
          canvas.height = img.height;
          
          // 이미지 그리기
          ctx.drawImage(img, 0, 0);
          
          // 랜덤 제목 선택
          const title = titles[Math.floor(Math.random() * titles.length)];
          
          // 텍스트 스타일 (클래식 밈 스타일)
          ctx.font = 'bold ' + Math.min(canvas.width / 8, 80) + 'px Anton';
          ctx.fillStyle = 'white';
          ctx.strokeStyle = 'black';
          ctx.lineWidth = Math.min(canvas.width / 50, 10);
          ctx.textAlign = 'center';
          ctx.textBaseline = 'top';
          
          // 텍스트 여러 줄로 나누기 (길면 자동 줄바꿈)
          wrapText(ctx, title.toUpperCase(), canvas.width / 2, canvas.height * 0.05, canvas.width * 0.9, Math.min(canvas.width / 10, 100));
          
          // 미리보기 + 다운로드
          preview.src = canvas.toDataURL('image/png');
          preview.style.display = 'block';
          canvas.style.display = 'none';
          downloadBtn.style.display = 'block';
          
          downloadBtn.onclick = function() {
            const link = document.createElement('a');
            link.download = 'naming-school-sticker.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
          };
        };
        img.src = event.target.result;
      };
      reader.readAsDataURL(file);
    });


    function wrapText(context, text, x, y, maxWidth, lineHeight) {
      const words = text.split(' ');
      let line = '';
      let currentY = y;


      for (let n = 0; n < words.length; n++) {
        const testLine = line + words[n] + ' ';
        const metrics = context.measureText(testLine);
        const testWidth = metrics.width;
        if (testWidth > maxWidth && n > 0) {
          context.strokeText(line, x, currentY);
          context.fillText(line, x, currentY);
          line = words[n] + ' ';
          currentY += lineHeight;
        } else {
          line = testLine;
        }
      }
      context.strokeText(line, x, currentY);
      context.fillText(line, x, currentY);
    }
  </script>
</body>
</html>